for(h=a.height,w=a.width,M=((i,a)=>i.map(i=>a[0].map((i,c)=>a.map(i=>i[c])).map(a=>i.map((c,e)=>i[e]*a[e]).reduce((i,a)=>i+a)))),dt=((i,a)=>i.reduce((i,c,e)=>i+(c-a[e])**2,0)),P=[],i=16;i--;)P.push([i%2,i%4<2?0:1,i%8<4?0:1,i<8?0:1].map(i=>i-.5));var e=1,s=1;with(c.translate(w/2,h/2),Math)(L=(()=>{e-=.001,s+=.01,c.strokeStyle=`rgb(${[sin(2*s),cos(s),sin(s)].map(i=>128*i+128).join(",")})`;var a=i=>{var a=M([[cos(k=s/4),-sin(k)],[sin(k),cos(k)],[0,0,cos(s),-sin(s)],[0,0,sin(s),cos(s)]],i.map(i=>[i])),c=1/(8-a[3]),o=M([[c],[0,c],[0,0,c]],a),t=M([[cos(e),0,-sin(e)],[0,1],[sin(e),0,cos(e)]],o),r=1/(6-t[2]);return M([[r],[0,r]],t).map(i=>i[0]*c*3e4)},o=(i,e)=>{c.beginPath();var s=a(P[i]),o=a(P[e]);c.moveTo(s[0],s[1]),c.lineTo(o[0],o[1]),c.stroke()};for(c.fillStyle="rgba(0,0,0,0.1)",c.fillRect(-w/2,-h/2,w,h),c.fillStyle="#fff",c.beginPath(),P.map(i=>{v=a(i),c.moveTo(v[0],v[1]),c.arc(v[0],v[1],5,0,2*PI),c.closePath()}),c.fill(),i=16;i--;)for(j=i;j--;)1==dt(P[i],P[j])&&o(i,j);requestAnimationFrame(L)}))();
