for(h=a.height,w=a.width,M=((i,a)=>i.map(i=>a[0].map((i,c)=>a.map(i=>i[c])).map(a=>i.map((c,e)=>i[e]*a[e]).reduce((i,a)=>i+a)))),dt=((i,a)=>i.reduce((i,c,e)=>i+(c-a[e])**2,0)),P=[],i=8;i--;)P.push([i%2,i%4<2?0:1,i%8<4?0:1].map(i=>2*i-1));var e=0;with(c.translate(w/2,h/2),Math)(L=(()=>{e+=.03;var a=i=>{c.beginPath(),i.map((i,a)=>(i=(i=>{var a=M([[cos(e),0,-sin(e)],[0,1],[sin(e),0,cos(e)]],M([[cos(e/4),-sin(e/4)],[sin(e/4),cos(e/4)],[0,0,1]],i.map(i=>[i]))),c=1/(6+2*sin(e/2)-a[2]);return M([[c],[0,c]],a).map(i=>i[0]*w)})(i),a?c.lineTo(i[0],i[1]):c.moveTo(i[0],i[1]))),c.closePath(),c.fill(),c.stroke()};for(c.lineWidth=3,c.strokeStyle=c.fillStyle="rgba(0,0,0,0.1)",c.fillRect(-w/2,-h/2,w,h),c.fillStyle=`rgb(${128*sin(2*e)+128},${128*cos(e)+128},${128*sin(e)+128},0.5)`,i=6;i--;)a(P.sort(a=>a[i/2]).slice(i%2*4,4+i%2*4));requestAnimationFrame(L)}))();
