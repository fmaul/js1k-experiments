var e=a.height,r=a.width,t=0,m=Math.sin,o=Math.cos,p=Math.random;for(M=((i,a)=>i.map(i=>a[0].map((i,e)=>a.map(i=>i[e])).map(a=>i.map((e,r)=>i[r]*a[r]).reduce((i,a)=>i+a)))),dt=((i,a)=>i.reduce((i,e,r)=>i+(e-a[r])**2,0)),O=[],K=i=128;i--;)O.push([p()*r,p()*e,3*p(),p()-.5,p()-.5,p()/50]);for(P=[],i=8;i--;)P.push([i%2,i%4<2?0:1,i%8<4?0:1].map(i=>2*i-1));(L=(()=>{c.lineWidth=2,c.strokeStyle="rgba(0,0,0,0.1)",O.map(a=>{c.setTransform(1,0,0,1,a[0],a[1]);var e=a[2];for(c.fillStyle=`rgb(${m(2*e)*K+K},${o(e)*K+K},${m(e)*K+K},0.5)`,i=6;i--;)c.beginPath(),P.sort(a=>a[i/2]).slice(i%2*4,4+i%2*4).map((i,a)=>{i=M([[1],[0,1]],M([[o(e),0,-m(e)],[0,1],[m(e),0,o(e)]],M([[o(e/4),-m(e/4)],[m(e/4),o(e/4)],[0,0,1]],i.map(i=>[i])))).map(i=>i[0]*r/40),a?c.lineTo(i[0],i[1]):c.moveTo(i[0],i[1])}),c.closePath(),c.fill(),c.stroke(),i<3&&(a[i]+=a[i+3])}),requestAnimationFrame(L)}))();
