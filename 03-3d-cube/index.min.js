h=a.height,w=a.width,vm=(t=>t.map(t=>[t])),mv=(t=>{let e=[t[0][0],t[1][0]];return t.length>2&&e.push(t[2][0]),e}),mmv=((t,e)=>mv(mm(t,vm(e)))),mm=((t,e)=>t.map(t=>tp(e).map(e=>dp(t,e)))),dp=((t,e)=>t.map((m,i)=>t[i]*e[i]).reduce((t,e)=>t+e)),tp=(t=>t[0].map((e,m)=>t.map(t=>t[m]))),dt=((t,e)=>t.reduce((t,m,i)=>t+(m-e[i])**2,0)),P=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]];let t=0;with(c.translate(w/2,h/2),c.fillStyle="rgba(0,0,0,0.1)",Math)(L=(()=>{t+=.03,c.strokeStyle=`rgb(${128*sin(2*t)+128},${128*cos(t)+128},${128*sin(t)+128})`;let e=e=>{let m=mmv([[cos(t),0,-sin(t)],[0,1,0],[sin(t),0,cos(t)]],e),i=1/(6+2*sin(t/2)-m[2]);return mmv([[i,0,0],[0,i,0]],m).map(t=>t*w)},m=(t,m)=>{c.beginPath();let i=e(P[t]),a=e(P[m]);c.moveTo(i[0],i[1]),c.lineTo(a[0],a[1]),c.stroke()};for(c.fillRect(-w/2,-h/2,w,h),i=8;i--;)for(j=i;j--;)4==dt(P[i],P[j])&&m(i,j);requestAnimationFrame(L)}))();
