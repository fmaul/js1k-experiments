for(h=a.height,w=a.width,vm=(m=>m.map(m=>[m])),mv=(m=>(v=[m[0][0],m[1][0]],m.length>2&&v.push(m[2][0]),v)),mmv=((m,i)=>mv(mm(m,vm(i)))),mm=((m,i)=>m.map(m=>tp(i).map(i=>dp(m,i)))),dp=((m,i)=>m.map((a,t)=>m[t]*i[t]).reduce((m,i)=>m+i)),tp=(m=>m[0].map((i,a)=>m.map(m=>m[a]))),dt=((m,i)=>m.reduce((m,a,t)=>m+(a-i[t])**2,0)),P=[],i=8;i--;)P.push([i%2,i%4<2?0:1,i%8<4?0:1].map(m=>2*m-1));var m=0;with(c.translate(w/2,h/2),c.fillStyle="rgba(0,0,0,0.1)",Math)(L=(()=>{m+=.03,c.strokeStyle=`rgb(${128*sin(2*m)+128},${128*cos(m)+128},${128*sin(m)+128})`;var a=i=>{var a=mmv([[cos(m),0,-sin(m)],[0,1],[sin(m),0,cos(m)]],mmv([[cos(m/4),-sin(m/4)],[sin(m/4),cos(m/4)],[0,0,1]],i)),t=1/(6+2*sin(m/2)-a[2]);return mmv([[t],[0,t]],a).map(m=>m*w)},t=(m,i)=>{c.beginPath();var t=a(P[m]),e=a(P[i]);c.moveTo(t[0],t[1]),c.lineTo(e[0],e[1]),c.stroke()};for(c.fillRect(-w/2,-h/2,w,h),i=8;i--;)for(j=i;j--;)4==dt(P[i],P[j])&&t(i,j);requestAnimationFrame(L)}))();
