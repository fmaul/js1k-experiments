h=a.height,w=a.width,vm=(e=>e.map(e=>[e])),mv=(e=>{let m=[e[0][0],e[1][0]];return e.length>2&&m.push(e[2][0]),m}),mmv=((e,m)=>mv(mm(e,vm(m)))),mm=((e,m)=>e.map(e=>tp(m).map(m=>dp(e,m)))),dp=((e,m)=>e.map((t,i)=>e[i]*m[i]).reduce((e,m)=>e+m)),tp=(e=>e[0].map((m,t)=>e.map(e=>e[t]))),dt=((e,m)=>e.reduce((e,t,i)=>e+(t-m[i])**2,0)),P=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]];let e=0;with(c.setTransform(1,0,0,1,w/2,h/2),c.fillStyle="rgba(0,0,0,0.1)",Math)(L=(()=>{e+=.03,c.strokeStyle=`rgb(${128*sin(2*e)+128},${128*cos(e)+128},${128*sin(e)+128})`;let m=m=>{let t=mmv([[cos(e),0,-sin(e)],[0,1,0],[sin(e),0,cos(e)]],m),i=1/(6+2*sin(e/2)-t[2]);return mmv([[i,0,0],[0,i,0]],t).map(e=>e*w)},t=(e,t)=>{c.beginPath();let i=m(P[e]),r=m(P[t]);c.moveTo(i[0],i[1]),c.lineTo(r[0],r[1]),c.stroke()};for(c.fillRect(-w/2,-h/2,w,h),i=8;i--;)for(j=i;j--;)4==dt(P[i],P[j])&&t(i,j);requestAnimationFrame(L)}))();
